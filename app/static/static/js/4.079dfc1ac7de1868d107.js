webpackJsonp([4],{"+qSV":function(t,e,a){"use strict";var n={name:"Predict",props:{recoResult:{type:Array,required:!0},probability:{type:Array,required:!0}},data:function(){return{}},methods:{predictStyle:function(t){t.row,t.column;var e=t.rowIndex,a=t.columnIndex;return this.recoResult[a-1]==e?(console.log(this.recoResult[a-1],e),"predict"):""}}},o={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("el-table",{staticStyle:{width:"100%"},attrs:{data:this.probability,"cell-class-name":this.predictStyle}},[e("el-table-column",{attrs:{prop:"index",label:"",width:"100"}}),this._v(" "),e("el-table-column",{attrs:{prop:"gl121",label:"GL121-L1",width:"140"}}),this._v(" "),e("el-table-column",{attrs:{prop:"sgl1",label:"SG-L1",width:"140"}}),this._v(" "),e("el-table-column",{attrs:{prop:"noregu",label:"NO-REGU",width:"140"}})],1)],1)},staticRenderFns:[]};var i=a("VU/8")(n,o,!1,function(t){a("SfeC")},null,null);e.a=i.exports},CXFi:function(t,e,a){"use strict";(function(t){var n=a("mtWM"),o=a.n(n),i=a("+qSV");e.a={name:"HandwtReco",components:{"predict-table":i.a},data:function(){return{currentTool:"iconfont icon-maobi",currentToolNum:"1",tools:[{dataTool:"1",toolClass:"iconfont icon-maobi"}],selectedToolIndex:"0",lineWidth:"30",startx:999,starty:999,endx:0,endy:0,recoResult:[],probability:[]}},mounted:function(){var e=t(document).find("canvas"),a=e[0].getContext("2d");a.fillStyle="#fff",a.fillRect(0,0,e.width(),e.height());for(var n=0;n<10;n++)this.probability.push({index:n,gl121:"",sgl1:"",mlp:""})},methods:{painting:function(e){var a=this,n=t(e.target),o=n[0].getContext("2d"),i=(parseInt(this.getAttrValue(n,"width","px")),parseInt(this.getAttrValue(n,"height","px")),parseInt(n.position().left),parseInt(n.position().top),!1);t(document).on("mousedown","canvas",function(t){t.stopImmediatePropagation(),i=!0,o.beginPath(),o.lineCap="round",o.strokeStyle="#"+a.pageLineColor,o.lineWidth=a.lineWidth;var e=t.pageX-n.offset().left,r=t.pageY-n.offset().top;o.moveTo(e,r)}),t(document).on("mousemove","canvas",function(t){if(t.stopImmediatePropagation(),!i)return!1;var e=t.pageX-n.offset().left,r=t.pageY-n.offset().top;o.lineTo(e,r),o.stroke(),e<a.startx&&(a.startx=e),r<a.starty&&(a.starty=r),e>a.endx&&(a.endx=e),r>a.endy&&(a.endy=r)}),t(document).on("mouseup",function(t){t.stopImmediatePropagation(),i=!1,o.closePath()})},downloadImage:function(){var e=t(document).find("canvas"),a=(e[0].getContext("2d"),e[0].toDataURL("png").replace(this.fixType("png"),"image/octet-stream")),n=this;o()({url:"/recognition",method:"post",data:{imageData:a,x:Math.round(n.startx-30)>0?Math.round(n.startx-30):0,y:Math.round(n.starty-30)>0?Math.round(n.starty-30):0,endx:Math.round(n.endx+30)<300?Math.round(n.endx+30):300,endy:Math.round(n.endy+30)<300?Math.round(n.endy+30):300},contentType:"application/json"}).then(function(t){t.data.success?(n.recoResult=t.data.res.result,n.probability=t.data.res.probability,n.feature=t.data.res.feature):alert(t.data.message)}).catch(function(t){alert(t)})},fixType:function(t){return"image/"+(t=t.toLocaleLowerCase().replace(/jpg/i,"jpeg")).match(/png|jpeg|bmp|gif/)[0]},clearScreen:function(){var e=t(document).find("canvas"),a=e[0].getContext("2d");a.fillStyle="#fff",a.fillRect(0,0,e.width(),e.height()),this.startx=999,this.starty=999,this.endx=0,this.endy=0,this.recoResult=[],this.probability=[],this.feature=[];for(var n=0;n<10;n++)this.probability.push({index:n,gl121:"",sgl1:"",mlp:""})},getAttrValue:function(t,e,a){return a=a||"",""+t.css(e).replace(a,"")}}}}).call(e,a("7t+N"))},FG8n:function(t,e){},SfeC:function(t,e){},jOi1:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a("CXFi"),o={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticStyle:{margin:"0 30px"}},[a("div",{staticStyle:{float:"left"}},[a("header",[a("div",{staticClass:"current-tool"},[a("i",{class:t.currentTool}),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.currentToolNum,expression:"currentToolNum"}],attrs:{type:"hidden",name:"currentTool"},domProps:{value:t.currentToolNum},on:{input:function(e){e.target.composing||(t.currentToolNum=e.target.value)}}})]),t._v(" "),t._m(0),t._v(" "),a("div",{staticClass:"downloadImage",on:{click:function(e){t.downloadImage()}}},[t._v("确认")]),t._v(" "),a("div",{staticClass:"clearScreen",on:{click:function(e){t.clearScreen()}}},[t._v("清屏")])]),t._v(" "),a("main",{staticClass:"clearfix"},[a("div",{staticStyle:{width:"300px",margin:"0 auto"}},[a("canvas",{attrs:{id:"drawing-board",width:"300px",height:"300px"},on:{mousedown:function(e){t.painting(e)}}})])])]),t._v(" "),a("div",{staticClass:"clearfix",staticStyle:{width:"550px",margin:"30px auto",float:"left"}},[a("predict-table",{attrs:{recoResult:t.recoResult,probability:t.probability}})],1)])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("ul",{staticClass:"tool-info clearfix"},[e("li",{staticClass:"lineWidth"},[e("p",[this._v("手写数字识别")])])])}]};var i=function(t){a("FG8n")},r=a("VU/8")(n.a,o,!1,i,"data-v-9d1076a2",null);e.default=r.exports}});
//# sourceMappingURL=4.079dfc1ac7de1868d107.js.map